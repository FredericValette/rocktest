- type : sql.connect
  params:
    retry: 0
    url: "jdbc:h2:mem:"

- type: sql.request
  params:
    request: >-
      CREATE TABLE rock (
         id INT NOT NULL,
         title VARCHAR(50) NOT NULL,
         author VARCHAR(20) NOT NULL,
         date DATE
      );
      insert into rock (id,title,author,date) values(3,'Suicide Blonde','INXS',parsedatetime('19900902','yyyyMMdd'));

- type: sql.request
  params:
    request: insert into rock (id,title,author,date) values(1,'Born in the USA','Bruce Springsteen',parsedatetime('19840604','yyyyMMdd'))

- type: sql.request
  params:
    request: select * from rock

- type: display
  value: ${request.3} rocks !!

- type: display
  value: '"${request.TITLE}" is the best song ever.'

- type: sql.request
  params:
    request: insert into rock (id,title,author,date) values(2,'Highway to hell','AC/DC',parsedatetime('19790727','yyyyMMdd'))

- type: sql.request
  params:
    request: select * from rock
    expect:
      - ^2,Highway to hell.*$
      - Born in the USA
      - Suicide Blonde

- type: var
  name: song
  value: Suicide Blonde

- type: sql.request
  params:
    request: select * from rock
    expect:
      - ${song}
      - Highway to hell
      - Born in the USA
