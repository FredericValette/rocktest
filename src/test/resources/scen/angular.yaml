# Sample web scenario with RockTest
# visits the sample Angular application "tour of heros" on Stackblitz

- type: web.get
  params:
    url: https://angular.io/generated/live-examples/toh-pt6/stackblitz.html

- type: display
  value: Current window = ${$web.window()}


# Click on the element with content "Open in New Window"
# Wait 20 seconds for the element to be clickable
# Wait is optional. By default, the timeout is 10 seconds.
# If the click opens a new window, RockTest automatically switches to  it
# unless the parameter "switch: false" is set.
- type: web.click
  params:
    by.linktext: Open in New Window
    wait : 20

# You can decide not to switch automatically to the new window
# Use the parameter switch = false
# You need to switch explicitly after

#- type: web.click
#  params:
#    by.content : Open in New Window
#    wait : 20
#    switch: false

#- type: display
#  value: New window = ${$web.newwindow()}

#- type: web.switch
#  params:
#    to: ${$web.newwindow()}

- type: web.click
  params:
    by.linktext : Heroes
    wait : 20

# This click does not open a new window.

- type: assert
  value: equals
  desc: Check that no new window is open
  params:
    expected: unset
    actual: ${$web.newwindow()::unset}

# Get a CSS attribute

- type: web.css
  params:
    by.content: Messages
    name: color

- type: assert
  value: equals
  desc: Check get css property
  params:
    expected: rgb(255, 0, 0)
    actual: ${css.result}

# Select by tag name and send keys
- type: web.sendkeys
  params:
    by.tag: input
    value: Freddie Mercury

- type: pause
  value: 1

# Select by tag name and clear
- type: web.clear
  params:
    by.tag: input

# Select by class name and click
- type: web.click
  params:
    by.class: delete


- type: pause
  value: 10


